<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>鹿🦌的QA網站</title>
  <meta name="theme-color" content="#020617" />
  <link rel="icon" type="image/png" href="網站頂端icon.JPG">
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div id="page-loading" aria-live="polite" aria-busy="true">
    <div class="card">
      <div class="spinner"><img src="轉圈圈.png" alt="載入中" class="loading-img"></div>
      <div class="title">系統初始化中</div>
      <div class="muted">正在建構 Elite 專業級介面...</div>
    </div>
  </div>

  <div id="changelog" class="modal hidden" role="dialog" aria-modal="true">
    <div class="modal-card">
      <div class="modal-header">
        <h2>🦌 網站更新</h2>
        <button id="cg-close" class="btn ghost">關閉視窗</button>
      </div>
      <div class="modal-body" id="cg-body"></div>
    </div>
  </div>

  <div id="ann-modal" class="modal hidden" role="dialog" aria-modal="true">
    <div class="modal-card">
      <div class="modal-header">
        <h2>網站公告</h2>
        <button id="ann-close" class="btn ghost">關閉公告</button>
      </div>
      <div class="modal-body" id="ann-body"></div>
    </div>
  </div>

  <div id="errbar" class="errbar hidden" role="status"></div>

  <header class="hero">
    <div class="brand">
      <img id="logo-img" src="Logo.png" class="logo-img" alt="鹿 Logo" />
      <div>
        <h1>鹿🦌的QA網站</h1>
        <p class="muted">專業資料庫查詢與沉浸式影片體驗</p>
      </div>
    </div>

    <div class="top-actions">
      <button id="site-bell" class="btn ghost icon" title="公告">🔔 公告</button>
      <button id="site-share" class="btn primary icon">分享</button>
      <a id="contact-eng" class="btn ghost icon" href="mailto:wanglien214@gmail.com">📧 聯絡工程師</a>
    </div>

    <nav class="tabs" role="tablist">
      <button id="tab-qa" class="tab active" role="tab" aria-selected="true" aria-controls="qa-panel">知識問答</button>
      <button id="tab-video" class="tab" role="tab" aria-selected="false" aria-controls="video-panel">影片中心</button>
      <button id="tab-effect" class="tab" role="tab" aria-selected="false" aria-controls="effect-panel">特效體驗</button>
    </nav>

    <div id="qa-toolbar" class="search-wrap">
      <input id="search" class="input" type="search" placeholder="搜尋關鍵字..." aria-label="搜尋 QA" />
      <button id="clear" class="btn ghost">清除</button>
    </div>

    <div class="stats" id="qa-stats">
      <div class="stat"><span id="stat-total" class="value">0</span><span class="label">總筆數</span></div>
      <div class="stat"><span id="stat-page" class="value">1</span><span class="label">當前頁</span></div>
      <div class="stat"><span id="stat-pages" class="value">1</span><span class="label">總頁數</span></div>
      <div class="stat"><span id="stat-filtered" class="value">0</span><span class="label">篩選中</span></div>
    </div>
  </header>

  <main class="container">
    <section id="qa-panel" class="tabpanel" role="tabpanel">
      <section id="qa-list" class="accordion"></section>
      <nav class="pager">
        <button id="prev" class="btn">上一頁</button>
        <input id="page" class="page-input" type="text" inputmode="numeric" pattern="[0-9]*" value="1">
        <span class="slash">/</span>
        <span id="pages" class="pages-badge">1</span>
        <button id="next" class="btn">下一頁</button>
      </nav>
    </section>

    <section id="video-panel" class="tabpanel hidden" role="tabpanel">
      <div class="video-layout">
        <div class="video-left">
          <div class="video-controls top">
            <button id="v-random" class="btn primary">隨機影片</button>
          </div>
          <div class="video-header">
            <span id="v-title" class="video-title">請選擇影片</span>
            <button id="v-info-btn" class="info-btn">ℹ️</button>
          </div>
          <div id="v-frame" class="video-frame"></div>
        </div>
        <div class="video-right" id="v-list"></div>
      </div>
    </section>

    <section id="effect-panel" class="tabpanel hidden" role="tabpanel">
      <div class="effect-pro">
        <div class="effect-phone">
          <div class="phone-bezel">
            <div class="phone-notch"></div>
            <div class="phone-screen">
              <img id="effect-demo" alt="預覽" class="phone-preview" />
            </div>
          </div>
          <p class="muted effect-caption">授權特效展示</p>
        </div>
        <aside class="effect-side card">
          <header class="side-head">
            <h3 id="effect-title" class="side-title">TikTok 特效</h3>
            <div class="side-actions">
              <button id="effect-play" class="btn primary">立即體驗</button>
            </div>
          </header>
          <div class="side-body">
            <ul class="bullets">
              <li>專業 9:16 直式視覺設計</li>
              <li>掃描下方 QR Code 快速開啟</li>
            </ul>
            <div class="qr-wrap">
              <img id="effect-qr" alt="QR" class="qr-img" />
              <div class="qr-meta">
                <div class="label">預覽連結</div>
                <code class="qr-url" id="effect-url-copy"></code>
                <button class="btn ghost" id="copy-effect-url">複製連結</button>
              </div>
            </div>
          </div>
        </aside>
      </div>
    </section>
  </main>

  <div id="info-modal" class="modal hidden" role="dialog">
    <div class="modal-card small">
      <div class="modal-header">
        <h3>影片詳細資訊</h3>
        <button id="modal-close" class="btn ghost">關閉</button>
      </div>
      <div class="modal-body" id="modal-body"></div>
    </div>
  </div>

  <button id="ai-fab" class="ai-fab" aria-label="AI">
    <svg width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M12 2a10 10 0 0 1 10 10c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2zm0 2a8 8 0 1 0 0 16 8 8 0 0 0 0-16z"/></svg>
  </button>

  <aside id="ai-panel" class="ai-panel hidden" role="dialog">
    <header class="ai-header">
      <h2>AI 助手</h2>
      <button id="ai-close" class="btn ghost">❌</button>
    </header>
    <div id="ai-messages" class="ai-messages"></div>
    <form id="ai-form" class="ai-input">
      <input id="ai-text" class="input" placeholder="詢問任何問題..." />
      <button class="btn primary" type="submit">發送</button>
    </form>
  </aside>

  <script src="deer-qa.js"></script>
  <script src="app.js"></script>
  <script src="qa-accordion-fix.js"></script>
  <script src="deer-video-min.js"></script>
  <script>
    const $ = (s, r = document) => r.querySelector(s);
    const $$ = (s, r = document) => Array.from(r.querySelectorAll(s));
    const on = (e, v, f) => e && e.addEventListener(v, f);

    (function boot() {
      const loader = $('#page-loading');
      window.addEventListener('load', () => {
        setTimeout(() => {
          loader.classList.add('hide');
          document.body.style.overflow = '';
        }, 1500);
      });
    })();

    const Loading = {
      show: (k, t) => {
        const ov = document.createElement('div');
        ov.id = `ov-${k}`;
        ov.className = 'page-overlay';
        ov.innerHTML = `<div class="card"><div class="spinner"><img src="轉圈圈.png" class="loading-img"></div><div class="title">${t}</div></div>`;
        document.body.appendChild(ov);
      },
      hide: (k) => {
        const ov = $(`#ov-${k}`);
        if (ov) {
          ov.classList.add('hide');
          setTimeout(() => ov.remove(), 400);
        }
      }
    };

    (function tabs() {
      const btns = $$('.tabs .tab');
      btns.forEach(b => {
        on(b, 'click', () => {
          btns.forEach(x => {
            x.classList.remove('active');
            $(`#${x.getAttribute('aria-controls')}`).classList.add('hidden');
          });
          b.classList.add('active');
          $(`#${b.getAttribute('aria-controls')}`).classList.remove('hidden');
        });
      });
    })();

    const EFFECT_INFO = {
      title: '鹿🦌超好笑特效',
      url: 'https://vm.tiktok.com/ZMAXNfQ4v/',
      qr: 'QR Code.png',
      demo: '鹿🦌超好笑特效.png'
    };

    (function initEffect() {
      $('#effect-title').textContent = EFFECT_INFO.title;
      $('#effect-qr').src = EFFECT_INFO.qr;
      $('#effect-demo').src = EFFECT_INFO.demo;
      $('#effect-url-copy').textContent = EFFECT_INFO.url;
      on($('#effect-play'), 'click', () => location.href = EFFECT_INFO.url);
      on($('#copy-effect-url'), 'click', () => {
        navigator.clipboard.writeText(EFFECT_INFO.url);
        $('#copy-effect-url').textContent = '已複製';
        setTimeout(() => $('#copy-effect-url').textContent = '複製連結', 2000);
      });
    })();

    on($('#ai-fab'), 'click', () => $('#ai-panel').classList.remove('hidden'));
    on($('#ai-close'), 'click', () => $('#ai-panel').classList.add('hidden'));

    on($('#site-share'), 'click', async () => {
      try {
        await navigator.share({ title: '鹿🦌的QA網站', url: location.href });
      } catch {
        navigator.clipboard.writeText(location.href);
        alert('網址已複製到剪貼簿');
      }
    });
  </script>
</body>
</html>
