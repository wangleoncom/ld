<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>鹿🦌的QA網站</title>
  <meta name="theme-color" content="#0f1220" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div id="changelog" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="cg-title">
    <div class="modal-card">
      <div class="modal-header">
        <h2 id="cg-title">🦌 V<span id="ver">1.8</span> 更新公告</h2>
        <button id="cg-close" class="btn ghost">我知道了，關閉視窗</button>
      </div>
      <div class="modal-body">
        <p class="muted">日期：<span id="cg-date"></span></p>
        <ul class="bullet">
          <li>修復建議按鈕會觸發來源視窗的 bug</li>
          <li>信心計算改為動態校正，不再卡在高分</li>
          <li>檢索變聰明：Jaccard + 近似 TF-IDF + 覆蓋率 + 位置/精確加分 + 別名濾除</li>
          <li>網站圖與 AI 頭像改由同一資料庫：IMAGES.網站圖 / IMAGES.AI圖</li>
        </ul>
      </div>
    </div>
  </div>

  <header class="hero">
    <div class="brand">
      <!-- 由 app.js 指派 src，自同一資料庫 IMAGES.網站圖 取得 -->
      <img id="logo-img" class="logo-img" alt="鹿 Logo" />
      <div>
        <h1>鹿🦌的QA網站</h1>
        <p class="muted">查詢資料庫中的問題與答案。若有錯誤，請回報工程師。</p>
      </div>
    </div>

    <div class="search-wrap">
      <input id="search" class="input" type="search" placeholder="輸入關鍵字（傳統比對）" aria-label="搜尋 QA" />
      <button id="clear" class="btn ghost">清除</button>
    </div>

    <div class="stats">
      <div class="stat"><span id="stat-total" class="value">0</span><span class="label">總筆數</span></div>
      <div class="stat"><span id="stat-page" class="value">1</span><span class="label">目前頁</span></div>
      <div class="stat"><span id="stat-pages" class="value">1</span><span class="label">總頁數</span></div>
      <div class="stat"><span id="stat-filtered" class="value">0</span><span class="label">目前篩選</span></div>
    </div>
  </header>

  <main class="container">
    <section id="qa-list" class="accordion"></section>

    <nav class="pager" aria-label="分頁導覽">
      <button id="prev" class="btn">上一頁</button>
      <span><input id="page" type="number" min="1" value="1" aria-label="跳至頁碼"> / <span id="pages">1</span></span>
      <button id="next" class="btn">下一頁</button>
    </nav>

    <footer class="footer">
      <button id="ft-share" class="btn">分享網站</button>
      <button id="ft-install" class="btn">加入主畫面</button>
      <a class="btn" href="mailto:wanglien214@gmail.com">聯絡工程師</a>
    </footer>
  </main>

  <button id="ai-fab" class="ai-fab" aria-label="開啟 AI 麋鹿" title="AI麋鹿">
    <svg width="26" height="26" viewBox="0 0 24 24" aria-hidden="true">
      <path fill="currentColor" d="M4 4h16v10H7l-3 3V4z"/><circle cx="9" cy="9" r="1.5" fill="#0f1220"/><circle cx="14" cy="9" r="1.5" fill="#0f1220"/>
    </svg>
  </button>

  <aside id="ai-panel" class="ai-panel hidden" role="dialog" aria-modal="true" aria-labelledby="ai-title">
    <header class="ai-header">
      <h2 id="ai-title">AI麋鹿 <span class="badge">本地</span></h2>
      <button id="ai-close" class="btn ghost">關閉</button>
    </header>
    <div id="ai-messages" class="ai-messages"></div>
    <form id="ai-form" class="ai-input" autocomplete="off">
      <input id="ai-text" class="input ai-inputbox" placeholder="輸入並按 Enter 送出" aria-label="對 AI 發問">
      <button class="btn primary" type="submit">送出</button>
    </form>
  </aside>

  <div id="install-tip" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="ins-title">
    <div class="modal-card small">
      <div class="modal-header"><h2 id="ins-title">加入主畫面</h2><button id="ins-close" class="btn ghost">關閉</button></div>
      <div class="modal-body"><p>在瀏覽器的分享或更多功能中，選「加入主畫面」。</p></div>
    </div>
  </div>

  <script src="deer-qa.js"></script>
  <script src="app.js"></script>
</body>
</html>